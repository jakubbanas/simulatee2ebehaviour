<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Simulate e2e behaviour</title>
    <script>
        (()=>{"use strict";var e={951:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LandingParams=void 0,r.LandingParams=class{constructor(e,r,i,t,a){this.fandomPixelId=e,this.advertiserId=r,this.orderId=i,this.lineItemId=t,this.creativeId=a}}},483:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LandingPage=void 0,r.LandingPage=class{constructor(e,r,i){this.paramsCollector=e,this.repository=r,this.sender=i}registerLanding(){const e=this.paramsCollector.getParams();this.repository.save(e),this.sender.send(this.prepareQueryParams(e))}prepareQueryParams(e){return{pixel_id:e.fandomPixelId?e.fandomPixelId:"",advertiser_id:e.advertiserId?e.advertiserId:"",order_id:e.orderId?e.orderId:"",line_item_id:e.lineItemId?e.lineItemId:"",creative_id:e.creativeId?e.creativeId:"",event_hash:this.randomString(),conversion:"false"}}randomString(){return Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)}}},892:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FetchGetRequestSender=void 0,r.FetchGetRequestSender=class{send(e){fetch("https://beacon.wikia-services.com/__track/special/fact_adengtrackingpixels_events?"+new URLSearchParams(e))}}},106:(e,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LandingParamsCookieJar=void 0;const t=i(951);r.LandingParamsCookieJar=class{save(e){document.cookie="fandom_pixel_id="+e.fandomPixelId,document.cookie="advertiser_id="+e.advertiserId,document.cookie="order_id="+e.orderId,document.cookie="line_item_id="+e.lineItemId,document.cookie="creative_id="+e.creativeId}get(){return new t.LandingParams(this.getCookie("fandom_pixel_id"),this.getCookie("advertiser_id"),this.getCookie("order_id"),this.getCookie("line_item_id"),this.getCookie("creative_id"))}getCookie(e){let r=e+"=",i=document.cookie.split(";");for(let e=0;e<i.length;e++){let t=i[e];if(null!=t){for(;" "==t.charAt(0);)t=t.substring(1);if(0==t.indexOf(r))return t.substring(r.length,t.length)}}return""}}},216:(e,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.QueryParamsCollector=void 0;const t=i(951);r.QueryParamsCollector=class{getParams(){const e=new URLSearchParams(window.location.search);return new t.LandingParams(e.get("fandom_pixel_id"),e.get("advertiser_id"),e.get("order_id"),e.get("line_item_id"),e.get("creative_id"))}}},603:(e,r,i)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TrackingPixel=void 0;const t=i(216),a=i(483),d=i(106),n=i(892),s=i(409);r.TrackingPixel=class{static registerLanding(){new a.LandingPage(new t.QueryParamsCollector,new d.LandingParamsCookieJar,new n.FetchGetRequestSender).registerLanding()}static registerPurchase(){new s.Purchase(new d.LandingParamsCookieJar,new n.FetchGetRequestSender).registerPurchase()}}},409:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Purchase=void 0,r.Purchase=class{constructor(e,r){this.repository=e,this.sender=r}registerPurchase(){const e=this.repository.get();this.sender.send(this.prepareQueryParams(e))}prepareQueryParams(e){return{pixel_id:e.fandomPixelId?e.fandomPixelId:"",advertiser_id:e.advertiserId?e.advertiserId:"",order_id:e.orderId?e.orderId:"",line_item_id:e.lineItemId?e.lineItemId:"",creative_id:e.creativeId?e.creativeId:"",event_hash:this.randomString(),conversion:"true"}}randomString(){return Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)}}}},r={};function i(t){var a=r[t];if(void 0!==a)return a.exports;var d=r[t]={exports:{}};return e[t](d,d.exports,i),d.exports}(()=>{const e=i(603);console.log("ping!"),e.TrackingPixel.registerLanding()})()})();
    </script>
</head>
<body>
    <button id="buy-now-button">
        BUY NOW
    </button>
</body>
<script type="text/javascript" src="script.js"></script>
</html>