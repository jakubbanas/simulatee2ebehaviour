<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Simulate e2e behaviour</title>
    <script>
        (()=>{"use strict";var e={951:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LandingParams=void 0,r.LandingParams=class{constructor(e,r,t,i,a){this.fandomPixelId=e,this.advertiserId=r,this.orderId=t,this.lineItemId=i,this.creativeId=a}}},483:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LandingPage=void 0,r.LandingPage=class{constructor(e,r,t){this.paramsCollector=e,this.repository=r,this.sender=t}registerLanding(){const e=this.paramsCollector.getParams();this.repository.save(e),this.sender.send(this.prepareQueryParams(e))}prepareQueryParams(e){return{pixel_id:e.fandomPixelId?e.fandomPixelId:"",advertiser_id:e.advertiserId?e.advertiserId:"",order_id:e.orderId?e.orderId:"",line_item_id:e.lineItemId?e.lineItemId:"",creative_id:e.creativeId?e.creativeId:"",event_hash:this.randomString(),conversion:"false"}}randomString(){return Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)}}},892:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FetchGetRequestSender=void 0,r.FetchGetRequestSender=class{send(e){fetch("https://beacon.wikia-services.com/__track/special/fact_adengtrackingpixels_events?"+new URLSearchParams(e))}}},106:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LandingParamsCookieJar=void 0;const i=t(951);r.LandingParamsCookieJar=class{save(e){document.cookie="fandom_pixel_id="+e.fandomPixelId,document.cookie="advertiser_id="+e.advertiserId,document.cookie="order_id="+e.orderId,document.cookie="line_item_id="+e.lineItemId,document.cookie="creative_id="+e.creativeId}get(){return new i.LandingParams(this.getCookie("fandom_pixel_id"),this.getCookie("advertiser_id"),this.getCookie("order_id"),this.getCookie("line_item_id"),this.getCookie("creative_id"))}getCookie(e){let r=e+"=",t=document.cookie.split(";");for(let e=0;e<t.length;e++){let i=t[e];if(null!=i){for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(r))return i.substring(r.length,i.length)}}return""}}},216:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.QueryParamsCollector=void 0;const i=t(951);r.QueryParamsCollector=class{getParams(){const e=new URLSearchParams(window.location.search);return new i.LandingParams(e.get("fandom_pixel_id"),e.get("advertiser_id"),e.get("order_id"),e.get("line_item_id"),e.get("creative_id"))}}},603:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TrackingPixel=void 0;const i=t(216),a=t(483),s=t(106),d=t(892),n=t(409);r.TrackingPixel=class{static registerLanding(){new a.LandingPage(new i.QueryParamsCollector,new s.LandingParamsCookieJar,new d.FetchGetRequestSender).registerLanding()}static registerPurchase(){new n.Purchase(new s.LandingParamsCookieJar,new d.FetchGetRequestSender).registerPurchase()}}},409:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Purchase=void 0,r.Purchase=class{constructor(e,r){this.repository=e,this.sender=r}registerPurchase(){const e=this.repository.get();this.sender.send(this.prepareQueryParams(e))}prepareQueryParams(e){return{pixel_id:e.fandomPixelId?e.fandomPixelId:"",advertiser_id:e.advertiserId?e.advertiserId:"",order_id:e.orderId?e.orderId:"",line_item_id:e.lineItemId?e.lineItemId:"",creative_id:e.creativeId?e.creativeId:"",event_hash:this.randomString(),conversion:"true"}}randomString(){return Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)}}}},r={};function t(i){var a=r[i];if(void 0!==a)return a.exports;var s=r[i]={exports:{}};return e[i](s,s.exports,t),s.exports}(()=>{const e=t(603);console.log("ping!"),e.TrackingPixel.registerPurchase()})()})();
    </script>
</head>
<body>
<p>You bought stuff</p>
</body>
</html>